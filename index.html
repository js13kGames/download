<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Download!!!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <canvas id="canvas"></canvas>
</body>
<script src="/dist/gim.js"></script>
<script>
let game = new gim.Game('canvas', 400, 700)

let Obstacle = {
    x: 0,
    y: game.canvas.height,
    width: 2,
    height: 2,
    speed: 10,
    randomX() {
        this.x = Math.floor(Math.random() * (game.canvas.height - this.width))
    },
    randomSpeed() {
        this.speed = Math.ceil(Math.random() * (10 - 1) + 1)
    },
    update(dt, gane) {
        this.y -= this.speed
        if (this.y < -this.height) {
            this.y = game.canvas.height
            this.randomX()
            this.randomSpeed()
        }
    },
    render(ctx) {
        ctx.fillStyle = 'red';
        ctx.fillRect(this.x, this.y, this.width, this.height);
    }
}

let obstacles = []
for (let i = 0; i < 40; i++) {
    let obs = {...Obstacle}
    obs.randomX()
    obs.randomSpeed()
    obstacles.push(obs)
}

game.on('update', (dt, game) => {
    obstacles.forEach(obs => obs.update(dt, game))
})

game.on('render', (stage) => {
    obstacles.forEach(obs => obs.render(stage.ctx))
})

setTimeout(() => game.start(), 2000)
</script>
</html>